<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="baidu-site-verification" content="iCQLNHIUn9" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="äº‘è®¡ç®—å¤§æ•°æ®åšå®¢|é™†å¿—å›,web,æ•°æ®æŒ–æ˜ä¸æ•°æ®åˆ†æ,åˆ†å¸ƒå¼ç®—æ³•|è¿™é‡Œæ˜¯ @T.Lé™†å¿—å›çš„ä¸ªäººåšå®¢ï¼Œä¸ä½ ä¸€èµ·å‘ç°æ›´å¤§çš„ä¸–ç•Œ">
    <meta name="keyword"  content="T.L,tl,luzhijun,trucy,trucyluce,é™†å¿—å›,é™†å¿—å›çš„åšå®¢,å¤§æ•°æ®ï¼Œäº‘è®¡ç®—,åˆ†å¸ƒå¼ç®—æ³•,åšå®¢,èŠ±æ¢¦çš„ç”·æœ‹å‹">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>Google Plus æ–‡æœ¬æå–ä¸åˆ†æ - æ¥šæ±|Trucy Luce Blog</title>

    <link rel="canonical" href="http://localhost:4000/2016/10/19/google+%E6%96%87%E6%9C%AC%E6%8F%90%E5%8F%96%E5%92%8C%E5%88%86%E6%9E%90/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?c07b62da6a94126e41877e6b30e15413";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">T.L Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    <li>
                        <a href="/tags/">Tags</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-Google+.jpg" width="0" height="0"> -->

<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        background-image: url('/img/post-bg-Google+.jpg')
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/tags/#ç¤¾äº¤ç½‘ç«™æ•°æ®åˆ†æ" title="ç¤¾äº¤ç½‘ç«™æ•°æ®åˆ†æ">ç¤¾äº¤ç½‘ç«™æ•°æ®åˆ†æ</a>
                        
                        <a class="tag" href="/tags/#ç¤¾ä¼šè®¡ç®—" title="ç¤¾ä¼šè®¡ç®—">ç¤¾ä¼šè®¡ç®—</a>
                        
                    </div>
                    <h1>Google Plus æ–‡æœ¬æå–ä¸åˆ†æ</h1>
                    
                    
                    <h2 class="subheading">æ•°æ®æå–ã€Bosenåˆ†è¯ã€NLTKã€TFIDFã€ä½™å¼¦ç›¸ä¼¼åº¦ç­‰</h2>
                    
                    <span class="meta">Posted by T.L on October 19, 2016</span>
                </div>
            </div>
        </div>
    </div>
<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {
  inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
  } 
}); 
</script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
<!-- ç™¾åº¦è‡ªåŠ¨æ¨é€ -->
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

				<p>æœ¬æ–‡æ‰€æœ‰æ•°æ®æºè‡ªgoogle+,å…¨ç¯‡å›´ç»•äº”ä¸ªæ–¹é¢æ¥è¿›è¡Œæ–‡æœ¬æå–å’Œåˆ†æï¼š</p>

<ol>
  <li>æ•°æ®è·å–</li>
  <li>ä¸­æ–‡åˆ†è¯</li>
  <li>NLTK</li>
  <li>ç‰¹å¾è¯æå–</li>
  <li>æ–‡æœ¬ç›¸ä¼¼åº¦</li>
</ol>

<p>é™¤æ­¤ä¹‹å¤–æœ¬æ–‡è¿˜è®¾è®¡åˆ°æƒ…æ„Ÿè¯åˆ†æï¼Œé½æ™®å¤«å®šå¾‹ç­‰ã€‚å…¶ä»–æ–¹æ³•åƒæ‘˜è¦è‡ªåŠ¨æå–ã€æ„è§æŒ–æ˜ã€æ–‡æœ¬èšç±»ã€æ–°é—»åˆ†ç±»ç­‰å¸¸è§„æ–‡æœ¬åˆ†æå†…å®¹å¹¶ä¸é€‚åˆgoogle+çš„æ•°æ®é›†ï¼Œå› æ­¤æœ¬æ–‡æ²¡æœ‰æ¶‰åŠã€‚</p>

<h2 id="è·å–æ•°æ®">è·å–æ•°æ®</h2>

<h3 id="å‡†å¤‡">å‡†å¤‡</h3>
<p>google+ api è·å–æˆæƒï¼š
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-17/94917912.jpg" alt="" />
å·¦ä¾§æ ç¬¬ä¸‰ä¸ªï¼Œç‚¹â€œå‡­æ®â€ï¼Œåˆ›å»ºapiå¯†é’¥ã€‚è¿™é‡Œç”¨apiå¯†é’¥å°±å¯ä»¥ï¼Œæ¯•ç«Ÿåªé‡‡é›†å…¬å…±æ•°æ®ä¿¡æ¯ï¼Œä¸æ˜¯ç”¨æˆ·éšç§æ•°æ®ï¼ˆéœ€è¦ç”¨æˆ·è®¤è¯ï¼‰ã€‚
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-17/60559851.jpg" alt="" /><br />
Google+ <a href="https://developers.google.com/apis-explorer/?hl=zh_CN#p/plus/v1/">APIæ–‡æ¡£</a>ä¸­å…·ä½“åˆ—å‡ºäº†ä½¿ç”¨æ–¹æ³•ã€‚æ­¤å¤–ï¼Œæœ‰ä¸“é—¨çš„<a href="https://developers.google.com/apis-explorer/?hl=zh_CN#p/plus/v1/plus.people.get?userId=118051310819094153327&amp;_h=6&amp;">APIæµè§ˆå™¨</a>å¯ä»¥æ ¹æ®æŸ¥è¯¢æ¡ä»¶å¿«é€Ÿç”ŸæˆRESTfulå¯¹åº”çš„urlåœ°å€ï¼Œå¾—åˆ°æŸ¥è¯¢ç»“æœã€‚(ä½¿ç”¨ä¹‹å‰å…ˆè®¾ç½®å³ä¸Šè§’çš„API id)</p>

<h3 id="restful-api">RESTful API</h3>
<p>ä»¥æŸ¥è¯¢æŸä¸ªç”¨æˆ·ä¸ºä¾‹ã€‚</p>

<ol>
  <li><strong>ä½¿ç”¨APIæµè§ˆå™¨</strong>
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-17/22885447.jpg" alt="" />
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-17/72652739.jpg" alt="" /></li>
  <li><strong>ç›´æ¥æµè§ˆå™¨æŠ“å–</strong></li>
</ol>

<div class="language-shell highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre>curl <span class="s2">"https://www.googleapis.com/plus/v1/people?query=Trucy+Luce&amp;key=</span><span class="nv">$api_key</span><span class="s2">"</span>
</pre></td></tr></tbody></table>
</div>
</div>
<blockquote>

  <p>{<br />
 â€œkindâ€: â€œplus#peopleFeedâ€,<br />
 â€œetagâ€: â€œ"xw0en60W6-NurXn4VBU-CMjSPEw/ycgzanUve1bCMxC0NXlP6C4MSTM"â€,<br />
 â€œselfLinkâ€: â€œhttps://www.googleapis.com/plus/v1/people?query=Trucy+Luce&amp;key=AIzaSyB2_mjqVwT5IpqGO8wfASMdnHUuvxwQqlIâ€,<br />
 â€œtitleâ€: â€œGoogle+ People Search Resultsâ€,<br />
 â€œnextPageTokenâ€: â€œCAESFTExMjAzMzk2OTk4NDI0NTc3MzQ3NQâ€,<br />
 â€œitemsâ€: [<br />
  {<br />
   â€œkindâ€: â€œplus#personâ€,<br />
   â€œetagâ€: â€œ"xw0en60W6-NurXn4VBU-CMjSPEw/xLkYpT8h4zlkDrhCUQcTzEZDl1U"â€,<br />
   â€œobjectTypeâ€: â€œpersonâ€,<br />
   â€œidâ€: â€œ112033969984245773475â€,<br />
   â€œdisplayNameâ€: â€œTrucy Luceâ€,<br />
   â€œurlâ€: â€œhttps://plus.google.com/112033969984245773475â€,<br />
   â€œimageâ€: {<br />
    â€œurlâ€: â€œhttps://lh3.googleusercontent.com/-L0oIZ63NyHk/AAAAAAAAAAI/AAAAAAAAABg/xr0lpRdSDLM/photo.jpg?sz=50â€<br />
   }<br />
  }<br />
 ]<br />
}</p>
</blockquote>

<p>å…³äºjsonä¸­keyçš„è§£é‡Šï¼Œå¯ä»¥åœ¨<a href="https://developers.google.com/apis-explorer/?hl=zh_CN#p/plus/v1/">APIæ–‡æ¡£</a>ä¸­æ‰¾åˆ°ã€‚</p>

<h3 id="åˆ©ç”¨python-sdk">åˆ©ç”¨python SDK</h3>
<p>google api for python æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸€ä¸ªæ˜¯<a href="http://github.com/google/oauth2client">oauth2</a>æˆæƒçš„ï¼Œå¦ä¸€ä¸ªå°±æ˜¯ç®€å•çš„<a href="http://github.com/google/google-api-python-client">api_key</a>æˆæƒçš„ã€‚æˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒä¸ªï¼Œè¿™æ˜¯å…¶<a href="http://google.github.io/google-api-python-client/docs/epy/index.html">APIæ–‡æ¡£</a>ã€‚è¯¥å®¢æˆ·ç«¯å·²ç»æ”¯æŒpython3ç‰ˆæœ¬ï¼Œè¿™é‡Œæœ¬æ–‡ä»£ç éƒ½ä»¥python3ä¸ºåŸºç¡€ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="kn">import</span> <span class="nn">httplib2</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">apiclient.discovery</span> <span class="c"># pip install google-api-python-client</span>

<span class="n">Q</span> <span class="o">=</span> <span class="s">"Trucy Luce"</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'è‡ªå·±è¾“å…¥'</span> 
<span class="n">service</span> <span class="o">=</span> <span class="n">apiclient</span><span class="o">.</span><span class="n">discovery</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s">'plus'</span><span class="p">,</span> <span class="s">'v1'</span><span class="p">,</span> <span class="n">http</span><span class="o">=</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">(),</span> <span class="n">developerKey</span><span class="o">=</span><span class="n">API_KEY</span><span class="p">)</span>
<span class="n">people_feed</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">people</span><span class="p">()</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">Q</span><span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">print</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">people_feed</span><span class="p">[</span><span class="s">'items'</span><span class="p">],</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>buildæ–¹æ³•è¯¦ç»†æŸ¥çœ‹<a href="http://google.github.io/google-api-python-client/docs/epy/index.html">ä»£ç </a>ä¸­çš„apiè¯´æ˜ï¼Œè¿”å›ä¸€ä¸ªä¸æœåŠ¡äº¤äº’çš„èµ„æºå¯¹è±¡ï¼ˆâ€ A Resource object with methods for interacting with the service. â€œ  ï¼‰ã€‚è€Œè¿™ä¸ªå¯¹è±¡å®é™…ä¸Šæ˜¯è°ƒåŠ¨äº† build_from_documenè¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯googleapiclient.discovery.Resourceèµ„æºå¯¹è±¡ï¼Œå®šä½åˆ°è¿™ä¸ªResourceèµ„æºå¯¹è±¡ï¼Œä½†ä»”ç»†æŸ¥æ‰¾å‘ç°å…¶æ–¹æ³•ä¸‹é¢æ²¡æœ‰people()æ–¹æ³•ï¼Œä½†æœ‰ä¸‰ä¸ªç”Ÿæˆæ–¹æ³•çš„æ–¹æ³•ï¼š</p>

<ol>
  <li>_add_basic_methods</li>
  <li>_add_nested_resources</li>
  <li>_add_next_methods</li>
</ol>

<p>å®é™…ä¸Šè¿™ä¸‰ä¸ªæ–¹æ³•æ˜¯æ ¹æ®responseçš„schemå±‚æ¬¡ç»“æ„æ¥ç”Ÿæˆçš„ï¼Œè¿™é‡Œçš„ä»£ç å€¼å¾—å­¦ä¹ ã€‚
æœ€ååªæ‰“å°itemséƒ¨åˆ†ï¼Œç¨‹åºæ‰§è¡Œç»“æœå¦‚ä¸‹:</p>

<blockquote>

  <p>[<br />
  {<br />
    â€œetagâ€: â€œ"xw0en60W6-NurXn4VBU-CMjSPEw/xLkYpT8h4zlkDrhCUQcTzEZDl1U"â€,<br />
    â€œdisplayNameâ€: â€œTrucy Luceâ€,<br />
    â€œobjectTypeâ€: â€œpersonâ€,<br />
    â€œimageâ€: {<br />
      â€œurlâ€: â€œhttps://lh3.googleusercontent.com/-L0oIZ63NyHk/AAAAAAAAAAI/AAAAAAAAABg/  xr0lpRdSDLM/photo.jpg?sz=50â€<br />
    },<br />
    â€œidâ€: â€œ112033969984245773475â€,<br />
    â€œkindâ€: â€œplus#personâ€,<br />
    â€œurlâ€: â€œhttps://plus.google.com/112033969984245773475â€<br />
  }<br />
]</p>
</blockquote>

<p>æ¥ä¸‹æ¥æŒ–æ˜ä¸‹æŸä¸ªç”¨æˆ·çš„è¿‘æœŸæ´»åŠ¨ï¼Œå®é™…ä¸Šå°±åƒæ¨ç‰¹æˆ–è€…ä¸€æ¡è¯´è¯´ã€‚è¿™æ¬¡æŒ‘ä¸ªè¯´ä¸­æ–‡çš„â€œMulin Hongâ€ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8</pre></td><td class="code"><pre><span class="n">USER_ID</span> <span class="o">=</span> <span class="s">'102121409478764742904'</span> <span class="c"># Mulin Hong</span>
<span class="n">service</span> <span class="o">=</span> <span class="n">apiclient</span><span class="o">.</span><span class="n">discovery</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s">'plus'</span><span class="p">,</span> <span class="s">'v1'</span><span class="p">,</span> <span class="n">http</span><span class="o">=</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">(),</span> <span class="n">developerKey</span><span class="o">=</span><span class="n">API_KEY</span><span class="p">)</span>
<span class="n">activity_feed</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">activities</span><span class="p">()</span><span class="o">.</span><span class="nb">list</span><span class="p">(</span>
  <span class="n">userId</span><span class="o">=</span><span class="n">USER_ID</span><span class="p">,</span>
  <span class="n">collection</span><span class="o">=</span><span class="s">'public'</span><span class="p">,</span>
  <span class="n">maxResults</span><span class="o">=</span><span class="s">'100'</span> <span class="c"># æœ€å¤§å…è®¸è®°å½•æ¡æ•°</span>
<span class="p">)</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">print</span> <span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">activity_feed</span><span class="p">,</span> <span class="n">ensure_ascii</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</pre></td></tr></tbody></table>
</div>
</div>

<p>service.activities().listæ–¹æ³•æœ‰å‡ ä¸ªå¿…è¦å‚æ•°ï¼ŒuserId:æ´»åŠ¨å‘èµ·è€…Idã€‚å¯é€‰å‚æ•°ï¼šcollection:æ´»åŠ¨å½’å±çš„é›†,é»˜è®¤ä¸ºpublicï¼Œè¿˜æ˜¯çœ‹ä¸‹é¢å›¾ç‰‡å§ï¼š</p>

<p><img src="http://oc5ofszxe.bkt.clouddn.com/16-10-17/84664354.jpg" alt="" /></p>

<p>å…¶ä»–å‚æ•°å¯ä»¥é€šè¿‡å‘½ä»¤<em>help(service.activities().list)</em>æ¥æŸ¥çœ‹ã€‚
ç”±äºå…±7000å¤šè¡Œï¼Œä¸æ–¹ä¾¿ç›´æ¥æ”¾å…¥æ–‡ç« ï¼Œå¯ä»¥ç‚¹å‡»æŸ¥çœ‹å†…å®¹ã€‚</p>

<p>å¦‚æœä»”ç»†è§‚å¯Ÿå†…å®¹ï¼Œä½ ä¼šå‘ç°contentä¸­æœ‰è®¸å¤šhtmlæ ‡ç­¾ï¼Œåƒ&lt;br&gt;ä¹‹ç±»çš„åœ¨æ–‡æœ¬ä¸­åº”è¯¥å»é™¤ï¼Œè¿™é‡Œç”¨åˆ°python Beautifulsoup4åŒ…<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>,(Beautiful Soup)å·²æˆä¸ºå’Œlxmlã€html6libä¸€æ ·å‡ºè‰²çš„pythonè§£é‡Šå™¨ï¼Œä¸ºç”¨æˆ·çµæ´»åœ°æä¾›ä¸åŒçš„è§£æç­–ç•¥æˆ–å¼ºåŠ²çš„é€Ÿåº¦ï¼Œæä¾›ä¸€äº›ç®€å•çš„ã€pythonå¼çš„å‡½æ•°ç”¨æ¥å¤„ç†å¯¼èˆªã€æœç´¢ã€ä¿®æ”¹åˆ†ææ ‘ç­‰åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å…·ç®±ï¼Œé€šè¿‡è§£ææ–‡æ¡£ä¸ºç”¨æˆ·æä¾›éœ€è¦æŠ“å–çš„æ•°æ®ï¼Œå› ä¸ºç®€å•ï¼Œæ‰€ä»¥ä¸éœ€è¦å¤šå°‘ä»£ç å°±å¯ä»¥å†™å‡ºä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚ç®€å•æ¥è¯´ï¼ŒBeautiful Soupæ˜¯pythonçš„ä¸€ä¸ªåº“ï¼Œæœ€ä¸»è¦çš„åŠŸèƒ½æ˜¯ä»ç½‘é¡µæŠ“å–æ•°æ®ã€‚æ›´å¤šå…³äºBeautiful Soupçš„å†…å®¹å¯ä»¥å‚è§å­¦ä¹ æ•™ç¨‹<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup>ã€‚</p>

<p>éšä¾¿æ‹¿æ¡å†…å®¹:
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-18/58368208.jpg" alt="" />
å¯ä»¥å‘ç°é‡Œé¢é™¤äº†å«æœ‰htmlæ ‡ç­¾è¿˜æœ‰BOMå­—ç¬¦(\ufeff)ï¼Œä½¿ç”¨bs4å»é™¤ï¼š
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-18/17333322.jpg" alt="" /></p>

<p>æˆ‘ä»¬ä¸Šé¢åªæ‹¿äº†100æ¡è®°å½•ï¼Œèƒ½ä¸èƒ½æ‹¿å…¨éƒ¨è®°å½•å‘¢ï¼Ÿæˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹çˆ¬ä¸‹çš„jsonæ–‡ä»¶ï¼Œå‘ç°ç¬¬ä¸€è¡Œæ˜¾ç¤ºnextPageTokenï¼Œä¹Ÿå°±æ˜¯è¯´è¿˜æœ‰ä¸‹ä¸€é¡µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡service.activities().list_nextæ–¹æ³•æ‹¿åˆ°ä¸‹ä¸€é¡µçš„resopnseã€‚æœ€åæˆ‘ä»¬æ‹¿åˆ°æ‰€æœ‰jsonå¹¶ç”¨ä¸Šé¢æ–¹æ³•æ¸…æ´—æ•´ç†ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></td><td class="code"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">httplib2</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">apiclient.discovery</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>

<span class="n">USER_ID</span> <span class="o">=</span> <span class="s">'102121409478764742904'</span> <span class="c"># Mulin Hong</span>
<span class="n">MAX_RESULTS</span> <span class="o">=</span> <span class="mi">400</span> <span class="c"># æœ€å¤§çºªå½•æ•°ï¼Œæ¯é¡µ100æ¡ï¼Œä¹Ÿå°±æ˜¯è¯´æœ€å¤š5é¡µï¼ˆ0~4é¡µï¼‰</span>
<span class="n">API_KEY</span> <span class="o">=</span> <span class="s">'ä½ è‡ªå·±çš„api_key'</span> 

<span class="k">def</span> <span class="nf">cleanHtml</span><span class="p">(</span><span class="n">html</span><span class="p">):</span>
  <span class="k">if</span> <span class="n">html</span> <span class="o">==</span> <span class="s">""</span><span class="p">:</span> <span class="k">return</span> <span class="s">""</span>
  <span class="k">return</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span><span class="s">'lxml'</span><span class="p">)</span><span class="o">.</span><span class="n">get_text</span><span class="p">()[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="n">service</span> <span class="o">=</span> <span class="n">apiclient</span><span class="o">.</span><span class="n">discovery</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="s">'plus'</span><span class="p">,</span> <span class="s">'v1'</span><span class="p">,</span> <span class="n">http</span><span class="o">=</span><span class="n">httplib2</span><span class="o">.</span><span class="n">Http</span><span class="p">(),</span> 
                                    <span class="n">developerKey</span><span class="o">=</span><span class="n">API_KEY</span><span class="p">)</span>
<span class="n">activity_feed</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">activities</span><span class="p">()</span><span class="o">.</span><span class="nb">list</span><span class="p">(</span><span class="n">userId</span><span class="o">=</span><span class="n">USER_ID</span><span class="p">,</span>
  <span class="n">collection</span><span class="o">=</span><span class="s">'public'</span><span class="p">,</span>
  <span class="n">maxResults</span><span class="o">=</span><span class="s">'100'</span> 
<span class="p">)</span>

<span class="n">activity_results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">while</span> <span class="n">activity_feed</span> <span class="o">!=</span> <span class="bp">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">activity_results</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">MAX_RESULTS</span><span class="p">:</span>
  <span class="n">activities</span> <span class="o">=</span> <span class="n">activity_feed</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
  <span class="k">if</span> <span class="s">'items'</span> <span class="ow">in</span> <span class="n">activities</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">activity</span> <span class="ow">in</span> <span class="n">activities</span><span class="p">[</span><span class="s">'items'</span><span class="p">]:</span>
      <span class="k">if</span> <span class="n">activity</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'objectType'</span><span class="p">]</span> <span class="o">==</span> <span class="s">'note'</span> <span class="ow">and</span> <span class="n">activity</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'content'</span><span class="p">]</span> <span class="o">!=</span> <span class="s">''</span><span class="p">:</span>        
        <span class="n">activity</span><span class="p">[</span><span class="s">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cleanHtml</span><span class="p">(</span><span class="n">activity</span><span class="p">[</span><span class="s">'title'</span><span class="p">])</span>
        <span class="n">activity</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'content'</span><span class="p">]</span> <span class="o">=</span> <span class="n">cleanHtml</span><span class="p">(</span><span class="n">activity</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'content'</span><span class="p">])</span>
        <span class="n">activity_results</span> <span class="o">+=</span> <span class="p">[</span><span class="n">activity</span><span class="p">]</span>
<span class="c">#æŸ¥çœ‹ä¸‹ä¸€é¡µ</span>
  <span class="n">activity_feed</span> <span class="o">=</span> <span class="n">service</span><span class="o">.</span><span class="n">activities</span><span class="p">()</span><span class="o">.</span><span class="n">list_next</span><span class="p">(</span><span class="n">activity_feed</span><span class="p">,</span> <span class="n">activities</span><span class="p">)</span>
<span class="c"># å†™åˆ°ä¸€ä¸ªjsonæ–‡ä»¶ä¸­å»</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">'resources'</span><span class="p">,</span> <span class="n">USER_ID</span> <span class="o">+</span> <span class="s">'.json'</span><span class="p">),</span> <span class="s">'w'</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">activity_results</span><span class="p">,</span><span class="n">ensure_ascii</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">print</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">activity_results</span><span class="p">)),</span> <span class="s">"activities written to"</span><span class="p">,</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>æœ€åè¾“å‡ºç»“æœâ€422 activities written to resources/102121409478764742904.jsonâ€ï¼Œå…±422æ¡è¢«è¾“å‡ºã€‚<a href="/html/102121409478764742904.json">æŸ¥çœ‹</a></p>

<h2 id="ä¸­æ–‡åˆ†è¯">ä¸­æ–‡åˆ†è¯</h2>
<p>ä¸ºäº†è¿›ä¸€æ­¥å¯¹æ¯æ¡è®°å½•åˆ†æï¼Œæœ‰å¿…è¦è¿›è¡Œä¸­æ–‡åˆ†è¯ã€‚æ–‡ç« <sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>ä¸­æåˆ°11æ¬¾å¼€æ”¾ä¸­æ–‡åˆ†è¯å¼•æ“ï¼Œä»åˆ†è¯æ•ˆæœå’Œè°ƒç”¨éš¾åº¦è§’åº¦è€ƒè™‘ï¼Œè¿™é‡Œé‡‡ç”¨å•†ä¸šåŒ–çš„BosonNLPå·¥å…·ï¼ˆå…³é”®è¢«ä»–ä¸€å¥å¹¿å‘Šå¸å¼•â€œç°åœ¨åŠ å…¥BosonNLPï¼Œå¯è·å¾—åˆ†è¯ä¸è¯æ€§æ ‡æ³¨å¼•æ“ä¸é™é‡è°ƒç”¨é¢åº¦ï¼â€ï¼‰ã€‚
æ³¨å†Œ<a href="http://bosonnlp.com/">æ³¢æ£®</a>åä¼šç»™ä½ ä¸€ä¸ªapi_keyï¼Œå’Œgoogle+ä¸€ä¸ªåŸç†ã€‚å®‰è£…pythonç‰ˆSDKï¼š pip install -U bosonnlp
ã€‚<a href="http://bosonnlp-py.readthedocs.io/#bosonnlp">apiæ–‡æ¡£</a>å¾ˆç®€å•ï¼Œçœ‹ä¸€éå°±ç›´æ¥ç”¨äº†ã€‚</p>

<p>å¼•ç”¨æ–¹æ³•ï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre>In [1]: from bosonnlp import BosonNLP

In [2]: nlp = BosonNLP('ä½ è‡ªå·±çš„api_key')

In [3]: s='å½“å¹´åŒ—äº¬å¸‚é•¿å¤¸ä¸‹æµ·å£ï¼š 2017å¹´æ²»ä¸äº†é›¾éœ¾å°±æå¤´æ¥è§      2016å¹´10æœˆ16æ—¥ï¼ŒåŒ—äº¬å¸‚ç©ºæ°”æ±¡æŸ“æŒ‡æ•°è¯»æ•°    å—¯ï¼Œ
   ...: åŒ—äº¬å¸‚é•¿åŒå¿—ï¼Œä½ åªæœ‰ä¸¤ä¸ªå¤šæœˆçš„æ—¶é—´äº†â€¦â€¦'

In [4]: nlp.tag(s)[0]['word']
Out[6]:
['å½“å¹´',
 'åŒ—äº¬',
 'å¸‚é•¿',
 'å¤¸',
 'ä¸‹',
 'æµ·å£',
 'ï¼š',
 '2017å¹´',
 'æ²»',
 'ä¸',
 'äº†',
 'é›¾éœ¾',
 ...
</pre></td></tr></tbody></table>
</div>
</div>
<p>ç›´æ¥ä½¿ç”¨é‡Œé¢çš„apiè¿›è¡Œæƒ…æ„Ÿåˆ†æï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="kn">from</span> <span class="nn">bosonnlp</span> <span class="kn">import</span> <span class="n">BosonNLP</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">BosonNLP</span><span class="p">(</span><span class="s">'ä½ çš„api_key'</span><span class="p">)</span>
<span class="n">all_content</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'content'</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">activity_results</span> <span class="p">]</span>
<span class="n">emos</span><span class="o">=</span><span class="n">nlp</span><span class="o">.</span><span class="n">sentiment</span><span class="p">(</span><span class="n">all_content</span><span class="p">[:</span><span class="mi">100</span><span class="p">],</span> <span class="n">model</span><span class="o">=</span><span class="s">'weibo'</span><span class="p">)</span><span class="c">#å•è¯æœ€å¤šåªèƒ½åˆ†æ100ä¸ªï¼Œæ¯æ—¥æœ€å¤š500ä¸ª</span>
<span class="n">drawdata</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">emos</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>ç»˜åˆ¶ç®±çº¿å›¾å’Œç»Ÿè®¡ç›´æ–¹å›¾ï¼š</p>

<p><img src="http://oc5ofszxe.bkt.clouddn.com/16-10-18/23871192.jpg" alt="" /></p>

<p><img src="http://oc5ofszxe.bkt.clouddn.com/16-10-18/94976039.jpg" alt="" /></p>

<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ•´ä½“æƒ…æ„Ÿåä¸Šï¼Œè¿™é‡Œåªè®¡ç®—äº†100æ¡ï¼Œæœ‰å…´è¶£æŠŠä¸€å¤©çš„å…è´¹è®°å½•æ•°500æ¡å…¨è®¡ç®—å®Œäº†çœ‹çœ‹ç»“æœã€‚å½“ç„¶æƒ…æ„Ÿç®—æ³•ç”¨çš„å¾ˆæ™®éäº†ï¼Œè‡ªå·±å®ç°ä¸ªä¹Ÿééš¾äº‹ã€‚
hrKOofx5.10057.yUUmemEd43Dm</p>

<h2 id="nltk">NLTK</h2>
<p>æ–¯å¦ç¦å¤§å­¦è‡ªç„¶è¯­è¨€å¤„ç†ç»„æ˜¯ä¸–ç•ŒçŸ¥åçš„NLPç ”ç©¶å°ç»„ï¼Œä»–ä»¬æä¾›äº†ä¸€ç³»åˆ—å¼€æºçš„Javaæ–‡æœ¬åˆ†æå·¥å…·ï¼ŒåŒ…æ‹¬åˆ†è¯å™¨(Word Segmenter)ï¼Œè¯æ€§æ ‡æ³¨å·¥å…·ï¼ˆPart-Of-Speech Taggerï¼‰ï¼Œå‘½åå®ä½“è¯†åˆ«å·¥å…·ï¼ˆNamed Entity Recognizerï¼‰ï¼Œå¥æ³•åˆ†æå™¨ï¼ˆParserï¼‰ç­‰ï¼Œå¯å–œçš„äº‹ï¼Œä»–ä»¬è¿˜ä¸ºè¿™äº›å·¥å…·è®­ç»ƒäº†ç›¸åº”çš„ä¸­æ–‡æ¨¡å‹ï¼Œæ”¯æŒä¸­æ–‡æ–‡æœ¬å¤„ç†ã€‚NLTK<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup>æ˜¯é’ˆå¯¹pythonçš„ä¸€ä¸ªè‡ªç„¶è¯­è¨€å¤„ç†å¹³å°,åœ¨windowsã€macã€linuxå¹³å°ä¸Šé€šç”¨ï¼Œå¹¶ä¸”æ˜¯å¼€æºå…è´¹çš„ï¼Œå›½å†…å¥½å¤šé¡¹ç›®éƒ½æ˜¯åœ¨å®ƒåŸºç¡€ä¸Šåšçš„ã€‚
ä¸‹é¢ç”¨nltkåˆ†æä¸‹æŠ“åˆ°çš„æ•°æ®ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></td><td class="code"><pre><span class="kn">import</span> <span class="nn">nltk</span>
<span class="kn">from</span> <span class="nn">bosonnlp</span> <span class="kn">import</span> <span class="n">BosonNLP</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">BosonNLP</span><span class="p">(</span><span class="s">'ä½ è‡ªå·±çš„api_key'</span><span class="p">)</span>

<span class="c">#å°†æ‰€æœ‰è®°å½•è½¬åŒ–ä¸ºä¸€ä¸ªè¯è¯­æ•°ç»„tokens</span>
<span class="n">contents</span><span class="o">=</span><span class="s">'ã€‚'</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">all_content</span><span class="p">)</span>
<span class="n">tokens</span><span class="o">=</span><span class="n">nlp</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">contents</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">'word'</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">tokens</span><span class="p">)</span>

<span class="n">text</span><span class="o">.</span><span class="n">concordance</span><span class="p">(</span><span class="s">"ä¸‰æ˜Ÿ"</span><span class="p">)</span><span class="c">#æŸ¥çœ‹å‡ºç°â€˜ä¸‰æ˜Ÿâ€™çš„è¯­å¥,å¯é€‰å‚æ•°åŒ…æ‹¬è¯­å¥æ•°ç›®å’Œè¯­å¥é•¿åº¦</span>
<span class="s">'''
Displaying 4 of 4 matches:
 åŒ—äº¬ å¸‚é•¿ å‡†å¤‡ å¦‚ä½• æ”¶åœº ï¼Ÿ ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 1016 ï¼š ä¸‰æ˜Ÿ æ‰‹æœº åä¸è™šä¼  ã€‚ How to mess up # StarWars a
å‡ è®ºæ–‡ ï¼Œ é‚£ å°± æ˜¯ ä¸¢è„¸ äº† ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 0923 ï¼š ä¸‰æ˜Ÿ ä¸€ç”Ÿ é»‘ http://cinacn.blogspot.com/2016/
 ï¼š å¿ƒé‡Œ æƒ³ è¯´ æ²¡äº‹ äº† ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 0917 ï¼š ä½¿ç”¨ ä¸‰æ˜Ÿ æ‰‹æœº çš„ åæœ ã€‚ è¿™ä¸ª é”™è¯¯ æœ‰ç‚¹ å¤§ äº† ã€‚ çœ‹çœ‹ æœé²œ æˆ˜äº‰ å¤§äº‹è®°
 ä½ ä»¬ å¼€å­¦ ä¸€æ¬¡æ€§ äº¤ å¤šå°‘ é’± ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 0906 ï¼š ä¸‰æ˜Ÿ æ‰‹æœº çš„ ä¸­ä¸œ ç‰ˆ ã€‚ èˆ†æƒ… ç›‘æ§ ï¼Œ å·²ç» æ˜¯ å¤§é™† åª’ç•Œ ä¸ç”¨ å…¬å¼€ 
'''</span>
<span class="n">text</span><span class="o">.</span><span class="n">collocations</span><span class="p">()</span><span class="c">#æœ€æ­é…çš„ç”¨è¯</span>
<span class="s">'''
Displaying 4 of 4 matches:
 åŒ—äº¬ å¸‚é•¿ å‡†å¤‡ å¦‚ä½• æ”¶åœº ï¼Ÿ ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 1016 ï¼š ä¸‰æ˜Ÿ æ‰‹æœº åä¸è™šä¼  ã€‚ How to mess up # StarWars a
å‡ è®ºæ–‡ ï¼Œ é‚£ å°± æ˜¯ ä¸¢è„¸ äº† ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 0923 ï¼š ä¸‰æ˜Ÿ ä¸€ç”Ÿ é»‘ http://cinacn.blogspot.com/2016/
 ï¼š å¿ƒé‡Œ æƒ³ è¯´ æ²¡äº‹ äº† ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 0917 ï¼š ä½¿ç”¨ ä¸‰æ˜Ÿ æ‰‹æœº çš„ åæœ ã€‚ è¿™ä¸ª é”™è¯¯ æœ‰ç‚¹ å¤§ äº† ã€‚ çœ‹çœ‹ æœé²œ æˆ˜äº‰ å¤§äº‹è®°
 ä½ ä»¬ å¼€å­¦ ä¸€æ¬¡æ€§ äº¤ å¤šå°‘ é’± ã€‚ # çœ‹ å›¾ ä¸ è¯´è¯ 0906 ï¼š ä¸‰æ˜Ÿ æ‰‹æœº çš„ ä¸­ä¸œ ç‰ˆ ã€‚ èˆ†æƒ… ç›‘æ§ ï¼Œ å·²ç» æ˜¯ å¤§é™† åª’ç•Œ ä¸ç”¨ å…¬å¼€ 
'''</span>
<span class="n">text</span><span class="o">.</span><span class="n">collocations</span><span class="p">()</span><span class="c">#æœ€æ­é…çš„ç”¨è¯</span>
<span class="s">'''
@Homebaby Wen; little pink; sounds cute; æ ¸åºŸæ–™ å¤„ç†å‚; è¯ºè´å°” æ–‡å­¦å¥–; è¿äº‘æ¸¯ æ ¸åºŸæ–™;
åˆ›ä¸šè€… è¶Šæ¥è¶Š
'''</span>
<span class="n">fdist</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">vocab</span><span class="p">()</span><span class="c">#{è¯1ï¼šè¯1å‡ºç°çš„ä¸ªæ•°ï¼Œè¯2ï¼šè¯2å‡ºç°çš„ä¸ªæ•°ï¼Œ...}</span>
<span class="k">print</span><span class="p">(</span><span class="n">fdist</span><span class="p">[</span><span class="s">"å¤§é™†"</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">fdist</span><span class="p">[</span><span class="s">"è€ç™¾å§“"</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">fdist</span><span class="p">[</span><span class="s">"çš„"</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">fdist</span><span class="p">[</span><span class="s">"ä¸"</span><span class="p">])</span>
<span class="s">'''
25
27
1250
351
'''</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span> <span class="c">#æ€»å…±çš„è¯æ•°</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fdist</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span> <span class="c">#ä¸é‡å¤è¯</span>
<span class="k">print</span><span class="p">(</span><span class="n">fdist</span><span class="o">.</span><span class="n">freq</span><span class="p">(</span><span class="s">'çš„'</span><span class="p">))</span><span class="c">#1250/27232</span>
<span class="k">print</span><span class="p">(</span><span class="n">fdist</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="c"># å‡ºç°æ¬¡æ•°æœ€å¤§çš„å‰20ä¸ª</span>
<span class="s">'''
27232
6465
0.04590188014101058
[('ï¼Œ', 1651), ('çš„', 1250), ('ã€‚', 959), ('ï¼š', 568), ('æ˜¯', 495), ('äº†', 380), ('ä¸', 351), ('â€', 257), ('â€œ', 255), ('#', 242), ('ä¸€', 222), ('å°±', 207), ('åœ¨', 200), ('æœ‰', 162), ('ï¼Ÿ', 150), ('ä½ ', 130), ('æˆ‘', 129), ('è¿™', 129), ('äºº', 127), ('éƒ½', 124)]
'''</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s">'stopwords'</span><span class="p">)</span>
<span class="s">'''
[nltk_data] Downloading package stopwords to /Users/Trucy/nltk_data...
[nltk_data]   Unzipping corpora/stopwords.zip.
ç„¶ååœ¨è§£å‹çš„åœè¯ç›®å½•ä¸­æ·»åŠ chinaæ–‡ä»¶ï¼Œé‡Œé¢æ·»åŠ åœè¯ï¼Œè¿™é‡Œç”¨çš„å“ˆå·¥å¤§åœè¯åº“
'''</span>
<span class="n">comm</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">fdist</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">100</span><span class="p">)))[</span><span class="mi">0</span><span class="p">]</span><span class="c">#100ä¸ªçƒ­è¯ä¸­éåœè¯</span>
<span class="k">print</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">comm</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s">'china'</span><span class="p">)])</span>
<span class="s">'''
['ä¸­å›½', 'è¯´', 'å›½å®¶', 'æ¯›', 'å¾®', 'è¯­å½•', 'ç²¾é€‰', 'å›¾', 'è¯´è¯', 'ä¸­å…±', 'æ—¥', 'æ”¿åºœ', 'å¹´', 'çˆ±å›½', 'ç¾å›½', 'å¤©', 'é’±', 'èŸèƒ', 'æ®µå­', 'é‡Œ', 'æƒ³']
'''</span>
<span class="c"># éurlçš„é•¿è¯è¯­</span>
<span class="k">print</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">fdist</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">12</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">w</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"http"</span><span class="p">)])</span>
<span class="s">'''
['@jianshenbiao', '@Jackstraw_PRC', '@Andrew19751110', '@boattractor_cj', '@_markhortonæå¾—åè€…ä¸å¾—ä¸', '@Weaponmagazine-è‚–å®ï¼‰', '@YE5MQ5Vtp2jlWX7', '@Menghuanlangqi2', '@szstupidcool', '@zhifangnvren', 'HappyBirthday', '@freedomandlaw', '@_mackhortonç»“æœæ”»å‡»äº†ä¸€ä¸ªå­—æ¯ä¹‹å·®çš„æ— è¾œé¬¼ä½¬', '@å’Œèœå¤´ï¼‰â€”â€”ä¸­å›½äººèƒ½æ¥å—ä¹ˆï¼Ÿä¸æ¯«æ²¡æœ‰å¯¹ä»–å›½çš„å°Šé‡', '@BattlerHenry', '@c338ki_selina', '@shangguanluan', '@zhanghui8964', '@fedsneighbor']
'''</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>ç›¸ä¿¡ä½ è‚¯å®šå¬è¿‡äºŒå…«åŸåˆ™ï¼Œå¦‚æœæŠŠæ‰€æœ‰çš„å•è¯ï¼ˆå­—ï¼‰æ”¾åœ¨ä¸€èµ·çœ‹å‘¢ï¼Ÿä¼šä¸ä¼š20%çš„è¯ï¼ˆå­—ï¼‰å äº†80%çš„å‡ºç°æ¬¡æ•°ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚</p>

<p>æ—©åœ¨ä¸Šä¸ªä¸–çºª30å¹´ä»£ï¼Œå°±æœ‰äººï¼ˆZipfï¼‰å¯¹æ­¤ä½œå‡ºäº†ç ”ç©¶ï¼Œå¹¶ç»™å‡ºäº†é‡åŒ–çš„è¡¨è¾¾â€”â€”é½æ™®å¤«å®šå¾‹ï¼ˆZipfâ€™s Lawï¼‰ï¼šä¸€ä¸ªè¯åœ¨ä¸€ä¸ªæœ‰ç›¸å½“é•¿åº¦çš„è¯­ç¯‡ä¸­çš„ç­‰çº§åºå·ï¼ˆè¯¥è¯åœ¨æŒ‰å‡ºç°æ¬¡æ•°æ’åˆ—çš„è¯è¡¨ä¸­çš„ä½ç½®ï¼Œä»–ç§°ä¹‹ä¸ºrankï¼Œç®€ç§°rï¼‰ä¸è¯¥è¯çš„å‡ºç°æ¬¡æ•°ï¼ˆä»–ç§°ä¸ºfrequencyï¼Œç®€ç§°fï¼‰çš„ä¹˜ç§¯å‡ ä¹æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼ˆconstantï¼Œç®€ç§°Cï¼‰ã€‚ç”¨å…¬å¼è¡¨ç¤ºï¼Œå°±æ˜¯ r Ã— f = C ã€‚ï¼ˆæ­¤å¤„çš„Cä¸€èˆ¬è®¤ä¸ºå–0.1ï¼‰ã€‚Zipfå®šå¾‹æ˜¯æ–‡çŒ®è®¡é‡å­¦çš„é‡è¦å®šå¾‹ä¹‹ä¸€ï¼Œå®ƒå’Œæ´›ç‰¹å¡å®šå¾‹ã€å¸ƒæ‹‰å¾·ç¦å®šå¾‹ä¸€èµ·è¢«å¹¶ç§°ä¸ºæ–‡çŒ®è®¡é‡å­¦çš„ä¸‰å¤§å®šå¾‹ã€‚</p>

<p>æˆ‘ä»¬ç›´è§‚åœ°éªŒè¯ä¸‹ï¼Œ100ä¸ªçƒ­è¯é¢‘åº¦å’Œæ’åçš„è§„å¾‹ï¼š</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="c">#å‰100çƒ­è¯ç»Ÿè®¡</span>
<span class="n">comm</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">fdist</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">400</span><span class="p">)))</span>
<span class="n">top</span><span class="o">=</span><span class="p">[(</span><span class="n">w</span><span class="p">,</span><span class="n">comm</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">comm</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> \
<span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s">'china'</span><span class="p">)]</span>
<span class="n">dd</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">top</span><span class="p">[:</span><span class="mi">100</span><span class="p">]))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">101</span><span class="p">),</span><span class="n">dd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s">'-'</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span><span class="n">dd</span><span class="p">[</span><span class="mi">0</span><span class="p">][::</span><span class="mi">2</span><span class="p">],</span><span class="n">rotation</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'å‰100çƒ­è¯'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s">'x-large'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'é¢‘æ•°'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s">'x-large'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'å‰100çƒ­è¯ç»Ÿè®¡'</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="s">'x-large'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p><img src="http://oc5ofszxe.bkt.clouddn.com/16-10-18/30574312.jpg" alt="" /></p>

<p>å¾ˆæ˜æ˜¾å¦‚æœå»æ‹Ÿåˆçš„è¯æ˜¯åæ¯”ä¾‹æ›²çº¿ï¼Œæœ‰å…´è¶£çš„ä½¿ç”¨æœ€å°äºŒä¹˜æ³•æ‹Ÿåˆä¸‹ï¼Œçœ‹ä¸‹cç­‰äºå¤šå°‘ã€‚åŒæ ·å¯ä»¥çœ‹åˆ°ï¼Œçƒ­è¯ä¸­æ¶‰åŠæ”¿æ²»è¯æ±‡æ¯”è¾ƒå¤šï¼Œå®é™…ä¸Šå¥½å¤šä¸­æ–‡è¯´è¯´éƒ½æ¶‰åŠæ•æ„Ÿè¯æ±‡ï¼Œè¿™å·²ç»æ˜¯æˆ‘æŒ‘çš„ä¸æ€ä¹ˆæ•æ„Ÿçš„äº†ï¼Œä¸‡æ¶è…æœ½çš„google+ï¼Œå¤©æœæ—©æ™šå–ç¼”ä½ ğŸ˜ã€‚</p>

<h2 id="ç‰¹å¾è¯æå–">ç‰¹å¾è¯æå–</h2>
<p>è¿™èŠ‚ä¸»è¦ä»‹ç»TFIDFï¼Œé«˜æ‰‹ç›´æ¥è·³è¿‡ã€‚</p>

<p>ç‰¹å¾è¯/å…³é”®è¯æå–æœ€ç®€å•æœ€åŸºç¡€çš„å°±æ˜¯TFIDFï¼Œè®°å¾—5å¹´å‰æˆ‘åŒå­¦è®©æˆ‘å¸®åšDI-TFIDFçš„è®ºæ–‡ï¼Œä¹Ÿå°±åªå¤šäº†ä¸ªç±»å†…ç¦»æ•£åº¦(DI)ï¼Œä»Šå¹´é˜¿é‡Œæ ¡æ‹›ç¬”è¯•é¢˜éƒ½æœ‰ï¼Œç”¨mapreduceå®ç°çš„ï¼Œå¾ˆæ˜¯å¹¿æ³›ã€‚å®é™…ä¸Štfidfç®—æ³•çš„å²æ•°ä¼°è®¡æ¯”æˆ‘è¿˜å¤§ï¼Œç›®å‰åº”ç”¨è¿˜æ˜¯å¾ˆå¹¿ã€‚å…¶ä»–ç‰¹å¾æå–æ–¹æ³•è¿˜æœ‰TFã€MIã€ECEã€QEMIã€IGã€ORã€GAã€SAã€PCAã€N-Gramç­‰ï¼Œå„æœ‰å¥½åï¼Œä¸ªäººå–œæ¬¢SAï¼ˆæ¨¡æ‹Ÿé€€ç«ç®—æ³•ï¼‰ã€‚</p>

<p>ç®€å•ä»‹ç»ä¸‹TFIDFï¼ŒTFIDFçš„ä¸»è¦æ€æƒ³æ˜¯ï¼šå¦‚æœæŸä¸ªè¯æˆ–çŸ­è¯­åœ¨ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°çš„é¢‘ç‡TFé«˜ï¼Œå¹¶ä¸”åœ¨å…¶ä»–æ–‡ç« ä¸­å¾ˆå°‘å‡ºç°ï¼Œåˆ™è®¤ä¸ºæ­¤è¯æˆ–è€…çŸ­è¯­å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ï¼Œé€‚åˆç”¨æ¥åˆ†ç±»ã€‚TFIDFå®é™…ä¸Šæ˜¯ï¼šTF * IDFï¼ŒTFè¯é¢‘(Term Frequency)ï¼ŒIDFåæ–‡æ¡£é¢‘ç‡(Inverse Document Frequency)ã€‚TFè¯é¢‘(Term Frequency)æŒ‡çš„æ˜¯æŸä¸€ä¸ªç»™å®šçš„è¯è¯­åœ¨è¯¥æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ï¼‰ã€‚IDFåæ–‡æ¡£é¢‘ç‡(Inverse Document Frequency)æ˜¯æŒ‡æœåŒ…å«è¯æ¡çš„æ–‡æ¡£è¶Šå°‘ï¼ŒIDFè¶Šå¤§ï¼Œåˆ™è¯´æ˜è¯æ¡å…·æœ‰å¾ˆå¥½çš„ç±»åˆ«åŒºåˆ†èƒ½åŠ›ã€‚å…¬å¼çœ‹çœ‹é˜®ä¸€å³°çš„æ–‡ç« <sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup>å°±æ‡‚ã€‚</p>

<p>å…ˆç”¨æ³¢æ£®æ¥ç©ä¸€ä¸‹ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="c">#ç¬¬100åˆ°109æ¡è®°å½•å„å‰äº”ä¸ªå…³é”®å­—åˆ†æ</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">extract_keywords</span><span class="p">(</span><span class="n">all_content</span><span class="p">[</span><span class="mi">100</span><span class="p">:</span><span class="mi">110</span><span class="p">],</span><span class="n">top_k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>

<blockquote>
  <p>[[[0.7099039005468386, â€˜æ—å¿—é¢–â€™],
  [0.6618791162771835, â€˜è¯´è¯â€™],
  [0.16548951440531323, â€˜å›¾â€™],
  [0.1391678971188951, â€˜çœŸâ€™],
  [0.08401698377794771, â€˜çœ‹â€™]],<br />
 [[0.4023478548923522, â€˜é¢è¯•â€™],
  [0.37301990285926334, â€˜ç§‹æœˆâ€™],
  [0.3067035017321436, â€˜ç¨‹åºå‘˜â€™],
  [0.3039517495852464, â€˜æœˆé¥¼â€™],
  [0.30299584457854634, â€˜è¯­å½•â€™]],<br />
 [[0.47362866866222336, â€˜æœé²œâ€™],
  [0.3352703984048265, â€˜å…¼å¬åˆ™æ˜â€™],
  [0.2612360542645001, â€˜å¿—æ„¿å†›â€™],
  [0.25878030672041646, â€˜æˆ˜äº‰â€™],
  [0.21926520954291415, â€˜è„¸çº¢â€™]],<br />
 [[0.49721835098126743, â€˜æˆ˜äº‰â€™],
  [0.32820426275864795, â€˜å…±äº§å…šâ€™],
  [0.3033420749749608, â€˜æœé²œâ€™],
  [0.22718247058147462, â€˜äº²åæ´¾â€™],
  [0.21472859448533965, â€˜ä¿å®¶â€™]],<br />
 [[0.2454776400796074, â€˜è€å¤´â€™],
  [0.2404142762073897, â€˜å¯¼æ¸¸â€™],
  [0.18403709160053647, â€˜å¹³å£¤â€™],
  [0.1753006540352852, â€˜é¦–éƒ½â€™],
  [0.1462342959779542, â€˜å¦å…‹â€™]],<br />
 [[0.611209874316231, â€˜è¯­å½•â€™],
  [0.47971562974594106, â€˜ç²¾é€‰â€™],
  [0.3914587127344426, â€˜å¥³ç”Ÿâ€™],
  [0.32629224154255926, â€˜å¤æ‚â€™],
  [0.24636184499215347, â€˜åˆ°åº•â€™]],<br />
 [[0.49698250604754796, â€˜å“å§â€™],
  [0.41302611057797883, â€˜è€ç™¾å§“â€™],
  [0.34093105823385067, â€˜å¤ªç›‘â€™],
  [0.3321228504052302, â€˜å¤§é™†â€™],
  [0.2893273489670021, â€˜ç¨è´Ÿâ€™]],<br />
 [[0.40325177993397743, â€˜å¯¼æ¸¸â€™],
  [0.3096728358372618, â€˜éŸ©æˆ˜â€™],
  [0.2929205806460173, â€˜æ¸¸å®¢â€™],
  [0.2480119777270853, â€˜å¸¦åŠ²â€™],
  [0.22704285072733602, â€˜è‡ªä»¥ä¸ºæ˜¯â€™]],<br />
 [[0.7242722832662252, â€˜å“¥ä»¬å„¿â€™],
  [0.5061338668467491, â€˜ç€æ€¥â€™],
  [0.4404639544540359, â€˜è¯´è¯â€™],
  [0.11012912198474084, â€˜å›¾â€™],
  [0.07352170001676955, â€˜å¤ªâ€™]],<br />
 [[0.39101364028081176, â€˜é¸¦ç‰‡â€™],
  [0.27683827573410325, â€˜ç§æ¤â€™],
  [0.22542041392575338, â€˜zhuoâ€™],
  [0.22542041392575338, â€˜nanjunâ€™],
  [0.22461629498500293, â€˜ç¼©å¤´â€™]]]</p>
</blockquote>

<p>ç”¨tfidfæ¥åšä¸€ä¸‹ï¼Œåˆ†å››æ­¥èµ°ï¼š</p>

<ol>
  <li>åˆ†è¯</li>
  <li>å»åœè¯</li>
  <li>è®¡ç®—tfidf</li>
  <li>æ’åºï¼ŒtopK</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="n">cts</span><span class="o">=</span><span class="p">[]</span>
<span class="c">#1.åæ¡è®°å½•çš„åˆ†è¯</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">nlp</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">all_content</span><span class="p">[</span><span class="mi">100</span><span class="p">:</span><span class="mi">110</span><span class="p">]):</span>
    <span class="n">cts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s">'word'</span><span class="p">])</span>
<span class="n">tfidfC</span><span class="o">=</span><span class="p">[]</span>
<span class="c">#2.å»åœè¯</span>
<span class="k">for</span> <span class="n">ac</span> <span class="ow">in</span> <span class="n">cts</span><span class="p">:</span> 
    <span class="n">tfidfC</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">ac</span> 
                   <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s">'china'</span><span class="p">)])</span>
<span class="n">tc</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">TextCollection</span><span class="p">(</span><span class="n">tfidfC</span><span class="p">)</span>
<span class="n">tfidfR</span><span class="o">=</span><span class="p">[]</span>
<span class="n">topK</span><span class="o">=</span><span class="mi">5</span>
<span class="c">#3.è®¡ç®—tfidf</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">tfidfC</span><span class="p">:</span>
    <span class="n">res</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">sc</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">c</span><span class="p">)):</span>
        <span class="n">val</span><span class="o">=</span><span class="n">tc</span><span class="o">.</span><span class="n">tf_idf</span><span class="p">(</span><span class="n">sc</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">val</span><span class="p">,</span><span class="n">sc</span><span class="p">])</span>
    <span class="c">#4.topK</span>
    <span class="n">sres</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="n">topK</span><span class="p">]</span>
    <span class="n">tfidfR</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sres</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">tfidfR</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>ç»“æœ:</p>

<blockquote>
  <p>[[[0.4605170185988092, â€˜æ—å¿—é¢–â€™],
  [0.3218875824868201, â€˜è¯´è¯â€™],
  [0.3218875824868201, â€˜çœŸâ€™],
  [0.3218875824868201, â€˜0913â€™],
  [0.3218875824868201, â€˜å›¾â€™]],<br />
 [[0.24237737820989955, â€˜é¢è¯•â€™],
  [0.24237737820989955, â€˜å®˜â€™],
  [0.12118868910494977, â€˜ä»å‰â€™],
  [0.12118868910494977, â€˜ç§‹æœˆâ€™],
  [0.12118868910494977, â€˜åŸå› â€™]],<br />
 [[0.1485538769673578, â€˜ä¸­â€™],
  [0.11651349719283252, â€˜æœé²œâ€™],
  [0.07767566479522169, â€˜æˆ˜äº‰â€™],
  [0.0742769384836789, â€˜è´¡çŒ®â€™],
  [0.0742769384836789, â€˜è¯â€™]],<br />
 [[0.15703993099903515, â€˜æˆ˜äº‰â€™],
  [0.10496334211526741, â€˜å…±äº§å…šâ€™],
  [0.1001123953475672, â€˜åœºâ€™],
  [0.07851996549951758, â€˜æœé²œâ€™],
  [0.0500561976737836, â€˜è¯¾æœ¬â€™]],<br />
 [[0.03868841135658895, â€˜è¯´â€™],
  [0.033210361918183356, â€˜å¥åº·â€™],
  [0.033210361918183356, â€˜è€å¤´â€™],
  [0.033210361918183356, â€˜é¦–éƒ½â€™],
  [0.03095072908527116, â€˜æŠ¢â€™]],<br />
 [[0.3837641821656743, â€˜å…³ç³»â€™],
  [0.3837641821656743, â€˜0912â€™],
  [0.3837641821656743, â€˜å¥³ç”Ÿâ€™],
  [0.26823965207235, â€˜å¾®â€™],
  [0.26823965207235, â€˜ç²¾é€‰â€™]],
 [[0.14631253749400913, â€˜å¤§é™†â€™],
  [0.14631253749400913, â€˜è€ç™¾å§“â€™],
  [0.10466295877245664, â€˜æ€»å¾—â€™],
  [0.10466295877245664, â€˜å€’æ•°â€™],
  [0.10466295877245664, â€˜æ¯›â€™]],<br />
 [[0.10233711524417982, â€˜æƒ³â€™],
  [0.07153057388596001, â€˜å¯¼æ¸¸â€™],
  [0.07153057388596001, â€˜è¯´â€™],
  [0.07153057388596001, â€˜æ¸¸å®¢â€™],
  [0.07153057388596001, â€˜å¹´â€™]],<br />
 [[0.3837641821656743, â€˜ç€æ€¥â€™],
  [0.3837641821656743, â€˜å“¥ä»¬å„¿â€™],
  [0.3837641821656743, â€˜0911â€™],
  [0.26823965207235, â€˜è¯´è¯â€™],
  [0.26823965207235, â€˜å›¾â€™]],<br />
 [[0.1151292546497023, â€˜é¸¦ç‰‡â€™],
  [0.1151292546497023, â€˜ç§æ¤â€™],
  [0.05756462732485115, â€˜zhuoâ€™],
  [0.05756462732485115, â€˜è¡¥ä¹ â€™],
  [0.05756462732485115, â€˜å……å½“â€™]]]</p>
</blockquote>

<p>ä¸¤è€…æ¯”è¾ƒä¸‹æ³¢æ£®è¦ç¨å¥½ä¸€äº›ï¼Œåº•å±‚ä¼°è®¡æ˜¯æ”¹è¿›çš„tfidfã€‚</p>

<h2 id="æ–‡æœ¬ç›¸ä¼¼åº¦">æ–‡æœ¬ç›¸ä¼¼åº¦</h2>
<p>æˆ‘ä»¬çœ‹ä»Šæ—¥å¤´æ¡æ–°é—»ï¼Œçœ‹å®Œåä¸‹é¢ä¼šæœ‰æ¨èç›¸ä¼¼çš„æ–‡ç« ï¼Œæä¾›ä½ æ›´å¤šé˜…è¯»çš„æœºä¼šã€‚ç›¸ä¼¼æ–‡æœ¬æ¨èæœ€åŸºæœ¬çš„æ–¹æ³•ç”¨åˆ°â€<a href="https://en.wikipedia.org/wiki/Cosine_similarity">ä½™å¼¦ç›¸ä¼¼æ€§</a>â€œï¼ˆcosine similiarityï¼‰ã€‚ä¸¾ä¸ªç®€å•ä¾‹å­ï¼š
 ä¸¤ä¸ªæ–‡æœ¬ï¼Œå…ˆåˆ†è¯ï¼š</p>
<blockquote>
  <p>æ–‡æœ¬1ï¼šgoogle/å’Œ/ç™¾åº¦/ç›¸ä¼¼<br />
æ–‡æœ¬2ï¼šç™¾åº¦/æ¯”ä¸äº†/è°·æ­Œ</p>
</blockquote>

<p>è®¡ç®—è¯é¢‘</p>
<blockquote>
  <p>æ–‡æœ¬1ï¼šgoogle:1,å’Œ:1,ç™¾åº¦:1,ç›¸ä¼¼:1<br />
æ–‡æœ¬2ï¼šç™¾åº¦:1,æ¯”ä¸äº†:1,è°·æ­Œ:1</p>
</blockquote>

<p>åˆ—å‡ºæ‰€æœ‰è¯ï¼ŒæŒ‰è¯é¢‘æ’åºï¼š</p>

<blockquote>
  <p>æ–‡æœ¬1ï¼šgoogle:1,å’Œ:1,ç™¾åº¦:1,ç›¸ä¼¼:1,æ¯”ä¸äº†:0<br />
æ–‡æœ¬2ï¼šgoogle:1,å’Œ:0,ç™¾åº¦:1,ç›¸ä¼¼:0,æ¯”ä¸äº†:1</p>
</blockquote>

<p>æå–è¯é¢‘å‘é‡ï¼š</p>

<blockquote>
  <p>æ–‡æœ¬1ï¼š[1,1,1,1,0]
æ–‡æœ¬2ï¼š[1,0,1,0,1]</p>
</blockquote>

<p>æ¥ä¸‹æ¥è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦:</p>

<script type="math/tex; mode=display">CosineDistance(u, v)=\frac{u\cdot v}{|u||v|}</script>

<p>è¿™ä¸ªå…¬å¼ä»£è¡¨ä¸¤ä¸ªå‘é‡çš„å¤¹è§’ï¼ŒäºŒç»´å‘é‡å¤¹è§’é«˜ä¸­ä¸å°±æ˜¯è¿™ä¸ªå…¬å¼ä¹ˆï¼Œæ¨å¹¿åˆ°ä¸‰ç»´ç”šè‡³å¤šç»´ä¹Ÿä¸€æ ·ã€‚
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-19/6547011.jpg" alt="" /></p>

<p>ä½™å¼¦å€¼è¶Šæ¥è¿‘1ï¼Œå°±è¡¨æ˜å¤¹è§’è¶Šæ¥è¿‘0åº¦ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªå‘é‡è¶Šç›¸ä¼¼ï¼Œè¿™å°±å«â€ä½™å¼¦ç›¸ä¼¼æ€§â€ã€‚æ‰€ä»¥ä¸Šé¢ä¸¤æ–‡æœ¬ç›¸ä¼¼åº¦ä¸º:</p>

<script type="math/tex; mode=display">\frac{2}{\sqrt{1^2+1^2+1^2+1^2+0^2}\times \sqrt{1^2+0^2+1^2+0^2+1^2}}=\frac{\sqrt{3}}{3}</script>

<p>ä¸‹é¢æˆ‘ä»¬æ¥ç»Ÿè®¡ä¸‹å†…å®¹è¾ƒé•¿çš„è®°å½•ç›¸ä¼¼æ–‡æœ¬(å†…å®¹è¾ƒçŸ­ç›¸ä¼¼åº¦ä¸æ˜æ˜¾)ã€‚
ç¬¬ä¸€æ­¥ï¼šæ‰¾å‡ºå†…å®¹é•¿åº¦å¤§äº700çš„è®°å½•ï¼Œå¹¶åšå¥½åˆ†è¯å’Œåœè¯</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="c">#ç­›é€‰è¦æ¯”è¾ƒçš„æ–‡æœ¬æ•°æ®,å…±24æ¡è®°å½•</span>
<span class="n">data</span><span class="o">=</span><span class="p">[]</span><span class="c">#ä¿å­˜object.contentå†…å®¹å¤§äº700çš„æ‰€æœ‰æ•°æ®</span>
<span class="n">all_posts</span><span class="o">=</span><span class="p">[]</span><span class="c">#åªä¿ç•™å‘å¸ƒçš„å†…å®¹æ•°æ®</span>
<span class="k">for</span> <span class="n">ac</span> <span class="ow">in</span> <span class="n">activity_results</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ac</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'content'</span><span class="p">])</span><span class="o">&gt;</span><span class="mi">700</span><span class="p">:</span>
        <span class="n">c</span><span class="o">=</span><span class="n">ac</span><span class="p">[</span><span class="s">'object'</span><span class="p">][</span><span class="s">'content'</span><span class="p">]</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="c">#åˆ†è¯å’Œåœè¯</span>
        <span class="n">all_posts</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">w</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">nlp</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">c</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s">'word'</span><span class="p">]</span> <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">nltk</span><span class="o">.</span><span class="n">corpus</span><span class="o">.</span><span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s">'china'</span><span class="p">)])</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>ç¬¬äºŒæ­¥ï¼šæ„é€ è¯æ¡æ–‡æ¡£çŸ©é˜µã€‚å½¢å¼å¦‚$td_matrix={(title_i,url_i):{term_j:tfidf_j,â€¦},â€¦}$</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="n">tc</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">TextCollection</span><span class="p">(</span><span class="n">all_posts</span><span class="p">)</span>
<span class="c">#æ„é€ è¯æ¡æ–‡æ¡£çŸ©é˜µ</span>
<span class="n">td_matrix</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">all_posts</span><span class="p">)):</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">all_posts</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
    <span class="n">fdist</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">FreqDist</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>

    <span class="n">doc_title</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s">'title'</span><span class="p">]</span>
    <span class="n">url</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s">'url'</span><span class="p">]</span>
    <span class="n">td_matrix</span><span class="p">[(</span><span class="n">doc_title</span><span class="p">,</span> <span class="n">url</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">term</span> <span class="ow">in</span> <span class="n">fdist</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">td_matrix</span><span class="p">[(</span><span class="n">doc_title</span><span class="p">,</span> <span class="n">url</span><span class="p">)][</span><span class="n">term</span><span class="p">]</span> <span class="o">=</span> <span class="n">tc</span><span class="o">.</span><span class="n">tf_idf</span><span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">post</span><span class="p">)</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>ç¬¬ä¸‰æ­¥:è®¡ç®—ç›¸ä¼¼åº¦<br />
è¿™é‡Œç”¨åˆ°nltk.cluster.util.cosine_distanceï¼Œè¿™ä¸ªå‡½æ•°è¯´æ˜å¦‚ä¸‹ï¼š
nltk.cluster.util.cosine_distance(u, v)[source]
Returns 1 minus the cosine of the angle between vectors v and u. This is equal to 1 - (u.v / |u||v|).
å¯ä»¥çœ‹åˆ°è¿”å›çš„æ˜¯1-ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œè¡¨ç¤ºçš„æ˜¯ä½™å¼¦è·ç¦»ï¼Œä¹Ÿå°±æ˜¯è¯´ä½™å¼¦è·ç¦»è¶Šå°ç›¸ä¼¼åº¦è¶Šé«˜ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></td><td class="code"><pre><span class="n">distances</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="p">(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">)</span> <span class="ow">in</span> <span class="n">td_matrix</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

    <span class="n">distances</span><span class="p">[(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">)]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="p">(</span><span class="n">min_dist</span><span class="p">,</span> <span class="n">most_similar</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">title2</span><span class="p">,</span> <span class="n">url2</span><span class="p">)</span> <span class="ow">in</span> <span class="n">td_matrix</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>

        <span class="n">terms1</span> <span class="o">=</span> <span class="n">td_matrix</span><span class="p">[(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">terms2</span> <span class="o">=</span> <span class="n">td_matrix</span><span class="p">[(</span><span class="n">title2</span><span class="p">,</span> <span class="n">url2</span><span class="p">)]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

        <span class="c"># å¡«å……0ä½¿ä¸¤å‘é‡é•¿åº¦ç›¸åŒ</span>
        <span class="k">for</span> <span class="n">term1</span> <span class="ow">in</span> <span class="n">terms1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">term1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">terms2</span><span class="p">:</span>
                <span class="n">terms2</span><span class="p">[</span><span class="n">term1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">term2</span> <span class="ow">in</span> <span class="n">terms2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">term2</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">terms1</span><span class="p">:</span>
                <span class="n">terms1</span><span class="p">[</span><span class="n">term2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># äº§ç”Ÿv1,v2å‘é‡ï¼Œå‘é‡å…ƒç´ æ˜ å°„ä¸€è‡´</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="p">[</span><span class="n">score</span> <span class="k">for</span> <span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">terms1</span><span class="o">.</span><span class="n">items</span><span class="p">())]</span>
        <span class="n">v2</span> <span class="o">=</span> <span class="p">[</span><span class="n">score</span> <span class="k">for</span> <span class="p">(</span><span class="n">term</span><span class="p">,</span> <span class="n">score</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">terms2</span><span class="o">.</span><span class="n">items</span><span class="p">())]</span>

        <span class="c"># è®¡ç®—ä½™å¼¦ç›¸ä¼¼åº¦</span>
        <span class="n">distances</span><span class="p">[(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">)][(</span><span class="n">title2</span><span class="p">,</span> <span class="n">url2</span><span class="p">)]</span> <span class="o">=</span> \
            <span class="n">nltk</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">cosine_distance</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">url1</span> <span class="o">==</span> <span class="n">url2</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="c"># æ ‡è®°ä½™å¼¦è·ç¦»æœ€å°çš„ï¼ˆç›¸ä¼¼åº¦æœ€å¤§ï¼‰</span>
        <span class="k">if</span> <span class="n">distances</span><span class="p">[(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">)][(</span><span class="n">title2</span><span class="p">,</span> <span class="n">url2</span><span class="p">)]</span> <span class="o">&lt;</span> <span class="n">min_dist</span><span class="p">:</span>
            <span class="p">(</span><span class="n">min_dist</span><span class="p">,</span> <span class="n">most_similar</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">distances</span><span class="p">[(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">)][(</span><span class="n">title2</span><span class="p">,</span>
                                         <span class="n">url2</span><span class="p">)],</span> <span class="p">(</span><span class="n">title2</span><span class="p">,</span> <span class="n">url2</span><span class="p">))</span>
    
    <span class="k">print</span> <span class="p">(</span><span class="s">"</span><span class="si">%</span><span class="s">s</span><span class="se">\n</span><span class="s">(</span><span class="si">%</span><span class="s">s) </span><span class="se">\n</span><span class="s"> æœ€ç›¸ä¼¼çš„æ˜¯:</span><span class="se">\n</span><span class="s"> </span><span class="si">%</span><span class="s">s</span><span class="se">\n</span><span class="s">(</span><span class="si">%</span><span class="s">s) </span><span class="se">\n</span><span class="s"> ç›¸ä¼¼åº¦: </span><span class="si">%</span><span class="s">f </span><span class="se">\n</span><span class="s"> ------------------------------</span><span class="se">\n</span><span class="s">"</span>
           <span class="o">%</span> <span class="p">(</span><span class="n">title1</span><span class="p">,</span> <span class="n">url1</span><span class="p">,</span><span class="n">most_similar</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">most_similar</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="o">-</span><span class="n">min_dist</span><span class="p">))</span>
</pre></td></tr></tbody></table>
</div>
</div>
<p>æŸ¥çœ‹éƒ¨åˆ†ç»“æœï¼š</p>

<div class="highlighter-rouge"><div class="highlight"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></td><td class="code"><pre>
#ä¸€æ—¥æ®µå­èŸèƒ
2016-9-5

@kxxjï¼š æ–°æ­‡åè¯­ï¼šåŒ…å­å®½è¡£â€”â€”éœ²é¦…å„¿äº†ã€‚

@CasperYangï¼šé€šå•†å®½è¡£å·²åŠ å…¥æ•æ„Ÿè¯è±ªååˆé¤ã€‚

@szeyan1220ï¼šå®½è¡£è§£å¸¦æ–°ç™½å¨˜ã€‚è½»å…³æ˜“é“å¯»ä½³äººï¼Œ..
(https://plus.google.com/+MulinHong/posts/FJuFWhykUhU) 
 æœ€ç›¸ä¼¼çš„æ˜¯:
 #ä¸€æ—¥æ®µå­èŸèƒ
2016-9-7

@boattractor_cjï¼šâ€œåƒé¥±äº†æ²¡äº‹å¹²â€ï¼Œä»£è¡¨äº†ä¹ å¸çš„å¤–äº¤æ€è·¯ï¼Œåæ˜ äº†ä»–å¯¹æ´‹å¤·çš„äº†è§£æ°´å¹³ï¼›â€œåƒé¥­ç ¸é”…â€ä»£è¡¨äº†ä¹ å¸çš„å†…æ”¿æ€è·¯ï¼Œåæ˜ äº†ä»–è”‘è§†å±æ°‘çš„éœ¸æ°”ï¼›â€œæ‰“æ–­éª¨å¤´..
(https://plus.google.com/+MulinHong/posts/BfAsHEk3Dfs) 
 ç›¸ä¼¼åº¦: 0.018108 
 ------------------------------

#ä¸€æ—¥æ®µå­èŸèƒ
2016-8-9

@blogtdï¼šæˆ‘å¥‡æ€ªçš„æ˜¯ï¼Œä¸ç®¡ä½œä¸ºä¸€ä¸ªå›½å®¶ï¼Œè¿˜æ˜¯ä¸€ä¸ªæ—ç¾¤ï¼Œä¸­å›½ä»æœªå‘ä¸–ç•Œå±•ç°è¿‡ç¾æ„§è¿™ç§æƒ…ç»ªã€‚

@hnjhjï¼šå„ç±»è¾±åäº‹ä»¶é¢‘å‘ï¼Œä½†å› æ˜Ÿæ˜Ÿè§’åº¦ä¸å¯¹è€Œè¾±åè¿˜æ˜¯å§‹æ–™æœªåŠ..
(https://plus.google.com/+MulinHong/posts/Y4DMUPtSSTB) 
 æœ€ç›¸ä¼¼çš„æ˜¯:
 #ä¸€æ—¥æ®µå­èŸèƒ
2016-9-26

@zhanghui8964ï¼šå°±ç›®å‰å½¢æ€è€Œè¨€ï¼Œæˆ‘ä¸€ç›´ä¸è®¤ä¸ºæ¸è¿›æ”¹è‰¯æ˜¯ä¸€ç§æ”¿æ²»å­˜åœ¨ï¼Œä¹Ÿä¸è®¤ä¸ºæ¿€è¿›é©å‘½æ˜¯ä¸€ç§æ”¿æ²»å­˜åœ¨ã€‚åœ¨ä¸€å®šæ„ä¹‰ä¸Šå¤§å®¶éƒ½æ˜¯å£ç‚®å…šã€‚åŒºåˆ«åªåœ¨äºéƒ¨åˆ†åŠªåŠ›è€…æäº†..
(https://plus.google.com/+MulinHong/posts/BNqkLxd9YCP) 
 ç›¸ä¼¼åº¦: 0.026590 
 ------------------------------

#ä¸€æ—¥æ®µå­èŸèƒ
2016-8-29

@ä¾¯è™¹æ–Œï¼šè­¦åŠ›é…ç½®å§ã€‚ä¸»è¦ç²¾åŠ›æ”¾åœ¨ç»´ç¨³ä¸Šï¼Œè¿™ç±»è¯ˆéª—æ¡ˆå‡ ä¹ä¸ä¼šæŠ•å…¥è­¦åŠ›èµ„æºï¼›åˆ°å…¨ç¤¾ä¼šéƒ½å…³æ³¨äº†ï¼Œå°±å˜æˆç»´ç¨³çš„äº‹ä»¶äº†ï¼Œè­¦æ–¹é©¬ä¸Šå°±æœ‰èµ„æºå¯¹æ¥äº†ã€‚

@baiduå†·å…µå™¨å§ï¼š..
(https://plus.google.com/+MulinHong/posts/RTDgVPKvbyM) 
 æœ€ç›¸ä¼¼çš„æ˜¯:
 #ä¸€æ—¥æ®µå­èŸèƒ
2016-8-23

@MyDFï¼šæ˜¨å¤©ä¸‹åˆè·¯è¿‡æ´ªéƒ½å—å¤§é“ï¼Œå‘ç°æ²¿é€”å¢åŠ äº†ä¸å°‘äº¤è­¦ï¼Œè¯¡å¼‚çš„æ˜¯ï¼Œå¤§çƒ­å¤©çš„è¡—è¾¹è¿˜ç«™ç€æˆ–åç€ä¸å°‘å¯ç–‘çš„ç¾¤ä¼—ï¼Œå‡ å…¬é‡Œéƒ½æ˜¯ï¼Œè±¡æ˜¯åœ¨ç­‰ä»€ä¹ˆå¤§äººç‰©ã€‚ä»Šå¤©çœ‹äº†æ–°é—»ï¼Œæ‰çŸ¥ÃŸé“..
(https://plus.google.com/+MulinHong/posts/UVZVyshut8R) 
 ç›¸ä¼¼åº¦: 0.082137 
 ------------------------------
</pre></td></tr></tbody></table>
</div>
</div>
<p>ä¸ºæŸ¥çœ‹æ–¹ä¾¿ï¼Œç»˜åˆ¶ç›¸ä¼¼åº¦çŸ©é˜µå›¾ï¼š
<img src="http://oc5ofszxe.bkt.clouddn.com/16-10-19/4103503.jpg" alt="" /></p>

<h2 id="ref">REF</h2>
<ul>
  <li>Russell, Matthew A. Mining the Social Web: Data Mining Facebook, Twitter, LinkedIn, Google+, GitHub, and More. Oâ€™Reilly Media, Inc. 2013.</li>
</ul>
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>python3.4å­¦ä¹ ç¬”è®°(åä¸ƒ) ç½‘ç»œçˆ¬è™«ä½¿ç”¨Beautifulsoup4æŠ“å–å†…å®¹.http://www.cnblogs.com/zdz8207/p/python_learn_note_17.html&nbsp;<a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>Beautiful Soup 4.2.0 æ–‡æ¡£.https://www.crummy.com/software/BeautifulSoup/bs4/doc/index.zh.html&nbsp;<a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>11 æ¬¾å¼€æ”¾ä¸­æ–‡åˆ†è¯å¼•æ“è¯„æµ‹.http://www.cnblogs.com/croso/p/5349517.html&nbsp;<a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>Natural Language Toolkit.http://www.nltk.org/index.html&nbsp;<a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>TF-IDFä¸ä½™å¼¦ç›¸ä¼¼æ€§çš„åº”ç”¨ï¼ˆä¸€ï¼‰ï¼šè‡ªåŠ¨æå–å…³é”®è¯.http://www.ruanyifeng.com/blog/2013/03/tf-idf.html&nbsp;<a href="#fnref:5" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>


                <hr>
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/10/10/%E5%8C%88%E7%89%99%E5%88%A9%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3/" data-toggle="tooltip" data-placement="top" title="åŒˆç‰™åˆ©ç®—æ³•è¯¦è§£">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2016/10/29/%E5%BE%AE%E5%8D%9A%E8%AF%9D%E9%A2%98%E7%88%AC%E5%8F%96%E4%B8%8E%E5%AD%98%E5%82%A8%E5%88%86%E6%9E%90/" data-toggle="tooltip" data-placement="top" title="å¾®åšè¯é¢˜çˆ¬å–ä¸å­˜å‚¨åˆ†æ">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <hr class="hidden-sm hidden-xs">
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#å‰ç«¯å¼€å‘" title="å‰ç«¯å¼€å‘" rel="2">
                                    å‰ç«¯å¼€å‘
                                </a>
                            
        				
                            
                				<a href="/tags/#JavaScript" title="JavaScript" rel="2">
                                    JavaScript
                                </a>
                            
        				
                            
        				
                            
                				<a href="/tags/#ç¤¾ä¼šè®¡ç®—" title="ç¤¾ä¼šè®¡ç®—" rel="4">
                                    ç¤¾ä¼šè®¡ç®—
                                </a>
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
        				
                            
                				<a href="/tags/#ç®—æ³•" title="ç®—æ³•" rel="3">
                                    ç®—æ³•
                                </a>
                            
        				
                            
                				<a href="/tags/#å¤§æ•°æ®" title="å¤§æ•°æ®" rel="3">
                                    å¤§æ•°æ®
                                </a>
                            
        				
                            
        				
                            
                				<a href="/tags/#ç¤¾äº¤ç½‘ç«™æ•°æ®åˆ†æ" title="ç¤¾äº¤ç½‘ç«™æ•°æ®åˆ†æ" rel="3">
                                    ç¤¾äº¤ç½‘ç«™æ•°æ®åˆ†æ
                                </a>
                            
        				
                            
        				
        			</div>
                </section>
                
                 <!-- UY BEGIN -->
                <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2144688"></script>
                <div id="uyan_frame"></div>
                <!-- UY END -->

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">
                    
                        <li><a href="http://blog.csdn.net/trucyluce">Trucy CSDN Blog</a></li>
                    
                        <li><a href="http://echoma.github.io/text_sequence_diagram/">åœ¨çº¿æ—¶åºå›¾</a></li>
                    
                        <li><a href="http://naotu.baidu.com/">åœ¨çº¿æ€ç»´å¯¼å›¾</a></li>
                    
                        <li><a href="http://www.cnblogs.com/baiboy/">NLPä¼è‰æƒŸå­˜</a></li>
                    
                        <li><a href="http://blog.5long.me/">èŒ¶ç è¯æ¡‘éº»</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>







<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("http://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    

                    <!-- add Weibo, Zhihu by Hux, add target = "_blank" to <a> by Hux -->
                    
                    <li>
                        <a target="_blank" href="https://www.zhihu.com/people/trucyluce">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa  fa-stack-1x fa-inverse">çŸ¥</i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a target="_blank" href="http://weibo.com/TrucyLuce">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    


                    
                    <li>
                        <a target="_blank" href="https://www.facebook.com/TrucyLuce">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/luzhijun">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; T.L Blog 2017
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>
<script src="/js/fastclick.min.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-83947622-1';
    var _gaDomain = 'https://luzhijun.github.io';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>



<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'c07b62da6a94126e41877e6b30e15413';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>

<!-- ä»£ç è¡Œå·-->
<script type="text/javascript">
var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,n=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,n.util.encode(e.content),e.alias):"Array"===n.util.type(e)?e.map(n.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=n.util.type(e);switch(t){case"Object":var a={};for(var r in e)e.hasOwnProperty(r)&&(a[r]=n.util.clone(e[r]));return a;case"Array":return e.map&&e.map(function(e){return n.util.clone(e)})}return e}},languages:{extend:function(e,t){var a=n.util.clone(n.languages[e]);for(var r in t)a[r]=t[r];return a},insertBefore:function(e,t,a,r){r=r||n.languages;var l=r[e];if(2==arguments.length){a=arguments[1];for(var i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l}var o={};for(var s in l)if(l.hasOwnProperty(s)){if(s==t)for(var i in a)a.hasOwnProperty(i)&&(o[i]=a[i]);o[s]=l[s]}return n.languages.DFS(n.languages,function(t,n){n===r[e]&&t!=e&&(this[t]=o)}),r[e]=o},DFS:function(e,t,a,r){r=r||{};for(var l in e)e.hasOwnProperty(l)&&(t.call(e,l,e[l],a||l),"Object"!==n.util.type(e[l])||r[n.util.objId(e[l])]?"Array"!==n.util.type(e[l])||r[n.util.objId(e[l])]||(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,l,r)):(r[n.util.objId(e[l])]=!0,n.languages.DFS(e[l],t,null,r)))}},plugins:{},highlightAll:function(e,t){var a={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",a);for(var r,l=a.elements||document.querySelectorAll(a.selector),i=0;r=l[i++];)n.highlightElement(r,e===!0,a.callback)},highlightElement:function(t,a,r){for(var l,i,o=t;o&&!e.test(o.className);)o=o.parentNode;o&&(l=(o.className.match(e)||[,""])[1],i=n.languages[l]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+l,o=t.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(e,"").replace(/\s+/g," ")+" language-"+l);var s=t.textContent,u={element:t,language:l,grammar:i,code:s};if(!s||!i)return n.hooks.run("complete",u),void 0;if(n.hooks.run("before-highlight",u),a&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(e){u.highlightedCode=e.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r&&r.call(t),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(e,t,r){var l=n.tokenize(e,t);return a.stringify(n.util.encode(l),r)},tokenize:function(e,t){var a=n.Token,r=[e],l=t.rest;if(l){for(var i in l)t[i]=l[i];delete t.rest}e:for(var i in t)if(t.hasOwnProperty(i)&&t[i]){var o=t[i];o="Array"===n.util.type(o)?o:[o];for(var s=0;s<o.length;++s){var u=o[s],c=u.inside,g=!!u.lookbehind,h=!!u.greedy,f=0,d=u.alias;u=u.pattern||u;for(var p=0;p<r.length;p++){var m=r[p];if(r.length>e.length)break e;if(!(m instanceof a)){u.lastIndex=0;var y=u.exec(m),v=1;if(!y&&h&&p!=r.length-1){var b=r[p+1].matchedStr||r[p+1],k=m+b;if(p<r.length-2&&(k+=r[p+2].matchedStr||r[p+2]),u.lastIndex=0,y=u.exec(k),!y)continue;var w=y.index+(g?y[1].length:0);if(w>=m.length)continue;var _=y.index+y[0].length,P=m.length+b.length;if(v=3,P>=_){if(r[p+1].greedy)continue;v=2,k=k.slice(0,P)}m=k}if(y){g&&(f=y[1].length);var w=y.index+f,y=y[0].slice(f),_=w+y.length,S=m.slice(0,w),O=m.slice(_),j=[p,v];S&&j.push(S);var A=new a(i,c?n.tokenize(y,c):y,d,y,h);j.push(A),O&&j.push(O),Array.prototype.splice.apply(r,j)}}}}}return r},hooks:{all:{},add:function(e,t){var a=n.hooks.all;a[e]=a[e]||[],a[e].push(t)},run:function(e,t){var a=n.hooks.all[e];if(a&&a.length)for(var r,l=0;r=a[l++];)r(t)}}},a=n.Token=function(e,t,n,a,r){this.type=e,this.content=t,this.alias=n,this.matchedStr=a||null,this.greedy=!!r};if(a.stringify=function(e,t,r){if("string"==typeof e)return e;if("Array"===n.util.type(e))return e.map(function(n){return a.stringify(n,t,e)}).join("");var l={type:e.type,content:a.stringify(e.content,t,r),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:r};if("comment"==l.type&&(l.attributes.spellcheck="true"),e.alias){var i="Array"===n.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(l.classes,i)}n.hooks.run("wrap",l);var o="";for(var s in l.attributes)o+=(o?" ":"")+s+'="'+(l.attributes[s]||"")+'"';return"<"+l.tag+' class="'+l.classes.join(" ")+'" '+o+">"+l.content+"</"+l.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(e){var t=JSON.parse(e.data),a=t.language,r=t.code,l=t.immediateClose;_self.postMessage(n.highlight(r,n.languages[a],a)),l&&_self.close()},!1),_self.Prism):_self.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(n.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",n.highlightAll)),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism);
</script>
<script >
!function(){"undefined"!=typeof self&&self.Prism&&self.document&&Prism.hooks.add("complete",function(e){if(e.code){var t=e.element.parentNode,s=/\s*\bhighlight\b\s*/;if(t&&/pre/i.test(t.nodeName)&&(s.test(t.className)||s.test(e.element.className))&&!e.element.querySelector(".line-numbers-rows")){s.test(e.element.className)&&(e.element.className=e.element.className.replace(s,"")),s.test(t.className)||(t.className+="highlight");var n,a=e.code.match(/\n(?!$)/g),l=a?a.length+1:1,m=new Array(l+1);m=m.join("<span></span>"),n=document.createElement("span"),n.className="line-numbers-rows",n.innerHTML=m,t.hasAttribute("data-start")&&(t.style.counterReset="linenumber "+(parseInt(t.getAttribute("data-start"),10)-1)),e.element.appendChild(n)}}})}();
</script>


<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
